<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ping Pong Launcher | Michelle Yang</title>
    <link rel="icon" type="image/png" href="../images/girl_cat_computer.png">
    <link rel="stylesheet" href="../css/styles.css">
</head>
<body>
    <header id="header">
        <nav class="navigation-bar">
            <div class="nav-left">
                <img class="nav-avatar" src="../images/girl_cat_computer.png" alt="girl cat computer" width="173px" height="auto">
                <h1 class="nav-title">Michelle Yang</h1>
            </div>
            <div class="nav-right">
                <a class="nav-link active" href="../index.html" target="_blank" rel="noopener noreferrer">Projects</a>
                <a class="nav-link" href="./synthesizing_birdsong/synthesizing_birdsong.html" target="_blank" rel="noopener noreferrer">Notes</a>
                <a class="nav-link" href="./synthesizing_birdsong/synthesizing_birdsong.html" target="_blank" rel="noopener noreferrer">Blog</a>
                <a class="nav-link" href="./synthesizing_birdsong/synthesizing_birdsong.html" target="_blank" rel="noopener noreferrer">About</a>
                <a class="nav-link" href="./synthesizing_birdsong/synthesizing_birdsong.html" target="_blank" rel="noopener noreferrer">Others</a>
            </div>
        </nav>
    </header>
    <hr>
    <main id="main-content">
        <article class="project-article" id="top">
            <header class="project-header">
                <h1 class="project-main-title">Ping Pong Launcher</h1>
            </header>
            <figure class="project-hero">
                <div class="project-hero-media">
                    <iframe width="560" height="315" src="https://www.youtube.com/embed/IXEofso0_44?si=MK0IOiRm1RZ1r-kY" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
                </div>
                <figcaption class="project-hero-caption">Ping Pong Launcher with Raspberry Pi 4 Demonstration Video</figcaption>
            </figure>
            <section class="project-section" id="introduction">
                <h2 class="section-title">Introduction</h2>
                <div class="section-content">
                    <p>
                        Practice is crucial to developing in table tennis skills. However, it often requires costly equipment or a training partner. Many players who would greatly benefit from structured solo training are unable to invest in commercial automatic ball launchers, which typically include advanced features such as adjustable angles, programmable shot sequences, and variable speed control. These devices can easily cost hundreds, if not thousands, of dollars.
                    </p>
                    <p>
                        This project centers on the need for an affordable and customizable ping pong ball launcher, built using readily available components and a Raspberry Pi 4 as the main controller. We are motivated by the fact that modern embedded systems and motor control technologies can replicate many of the features of expensive commercial launchers at a significantly lower cost.
                    </p>
                    <p>
                        The original proposal was to create a badminton launcher, inspired by one of Michelle’s friend who is taking badminton lessons as part of his university's PE requirement, however, due to safety concerns and limited laboratory testing space, the project was adjusted to focus on a ping pong ball launcher instead. We also made several design refinements, transitioning from a servo-based flinging arm to a dual DC motor wheel system to achieve better torque, consistency, and control.
                    </p>
                    <img src="./images/a.png" alt="ping pong launcher image">
                    <p>
                        Our system allows users to practice receiving serves and returns without the need for a training partner. It also enables control of essential parameters, including horizontal positioning (via stepper motor rotation), launch timing and speed (via dual DC motor wheels), and ball release sequencing (via a servo-controlled feeding mechanism). Users interact with the launcher through a touchscreen interface on the piTFT. We developed a functional training tool that demonstrates how embedded systems concepts learned in ECE 5725 can be applied to real-world applications by integrating common components such as DC motors, a servo motor, and a stepper motor, all controlled through multithreaded Python code.
                    </p>
                </div>
            </section>
            <section class="project-section" id="design">
                <h2 class="section-title">Design</h2>
                <div class="section-content">
                    <p>
                        We initially proposed building a badminton shuttlecock launcher. After showing our idea to Dr. Ma and the TAs, we decided to switch to a ping pong ball launcher instead for lab safety purpose as launching a birdie in the lab could be dangerous for a large launch range. We still kept the core of the system and main challenges of automated ball launching and positioning control the same.
                    </p>
                </div>
                <h3 class="sub-section-title"><u>Launch Mechanism Evolution:</u></h3>
                <div class="section-content">
                    <p>
                        Our launch mechanism had three different design stages:
                    </p>
                    <p>
                        <strong>Initial Design:</strong> Dual DC motor grip system <br>
                        In our first proposal from homework 3, we wanted to utilized what we have from lab 3 to use two high speed DC motors with rubber wheels to grip and shoot the ball. We thought this was the most straightforward. However, we wanted to make it more of a “launcher look” so we decided to change our design a bit.
                    </p>
                    <p>
                        <strong>Second Iteration:</strong> Servo motor based flinging arm<br>
                        Dr. Ma suggested making the design simpler by using one motor and a lever arm (like a ping pong paddle) to fling the ball up and out. This approach was inspired by the one dimensional helicopter physical system from ECE 4760 Microcontroller lab. We used a measuring spoon and a servo motor to implement this design. The ping pong ball fit perfectly in the spoon making it look very feasible to do. However, when we tried to test it in week 3, we discovered a serious issue where the servo motor didn’t have enough torque to throw the ping pong ball to the right position at the right speed and distance.
                    </p>
                    <p>
                        <strong>Final Design:</strong> Dual DC motor wheel system <br>
                        We eventually decided to go back to our original idea of using two DC motors with wheels. This design provided the balls the necessary amount of torque and speed control so they could be launched consistently. One servo motor was use to control the ball release, then the wheels would grip the ping pong ball as it falls through and accelerate it forward.
                    </p>
                </div>
                <h3 class="sub-section-title"><u>Positioning Control Systems:</u></h3>
                <div class="section-content">
                    <p>
                        <strong>Horizontal Positioning:</strong>
                        We used a stepper motor at the bottom of the launcher that turns the whole setup to change the horizontal angle. Users can set the angle to be -360 degree to 360 degree which allows the launcher to aim left, center, right across the table. We put this stepper motor on top of our tripod, making some distance between the point where the ball launches and the table so it could go farther.
                    </p>
                    <p>
                        <strong>Vertical Positioning:</strong>
                        We initially planned to use an additional servo motor to control the vertical launch angle. This required another board placed on top of the stepper motor and rest of the setup on top of that board as well. However, we decided to remove this feature to avoid stability issues. The 3D printed board fits the stepper motor itself and can move without an issue but putting objects on top and tilt it would cause the whole thing to fall. Moreover, ping pong ball should be launched downward and the tripod+gravity already provides this advantage for us. The final design launches the ball in a fixed forward downward trajectory, making it similar to realistic pratice scenarios.
                    </p>
                </div>
                <h3 class="sub-section-title"><u>Ball Feeding Mechanism:</u></h3>
                <div class="section-content">
                    <p>
                        A servo motor controls the release of ping pong balls from a cardboard tube feeder made out of toilet paper roll one at a time. We cut a small piece of cardboard that blocks the balls from the tube from coming out and attached it to the servo. It acts as a gate for the ball release that opens and closes the tube’s bottom. We initially planned to use a popsicle stick but it is easier and better looking to do it this way. When closed, it holds the stack of ball and when opened, it releases one ball into the launch wheels and quickly goes back.
                    </p>
                </div>
                <h3 class="sub-section-title"><u>Physical Assembly:</u></h3>
                <div class="section-content">
                    <p>
                        <strong>Base:</strong>
                        A wooden board is placed on top of the stepper motor that serves as a base for the launcher. It holds the main controllers such as the Raspberry Pi 4 and breadboard. We sawed a square hole in the middle of the board to put the stepper motor in which allows its shaft stick out. And to further keep the board from tipping over, it is held in place with velcro tape and double sided mounting tape.                    
                    </p>
                    <p>
                        <strong>Launcher:</strong>
                        Instead of putting a separate rotating platform on top of the stepper motor which made it hard to balance, we mounted the DC motors and ball feeder tube directly on the stepper motor shaft. This design lowered the center of gravity and improved overall stability.
                    </p>
                    <p>
                        <strong>Ball feeder:</strong>
                        A cardboard tube made from multiple toilet paper rolls was cut open to allow the balls to pass through smoothly. It is attached to multiple wood pieces for stability. The servo controlled gate at the bottom end of the tube allows one ball out at a time into the space between the two DC motor wheels.
                    </p>
                    <p>
                        <strong>Mounting and adhesion:</strong>
                        We used a mix of hot glue, regular tapes, electrical tape, mounting tape, and velcro tape to hold the parts in place.
                    </p>
                </div>
                <h3 class="sub-section-title"><u>Components:</u></h3>
                <div class="section-content">
                    <p>
                        Besides the components stated above, we initially planned to use the MPU 6050 accelerometer to detect launch motion and orientation. We then switched to the LIS3DH accelerometer as it would provide enough features for our project as we only required 3 axis acceleration data. In the end, we found that precise motion sensing was not critical for our final design and so we avoided both.
                    </p>
                    <img src="./images/servo.png" alt="ball release servo image">
                </div>
                <h2 class="section-title">Program</h2>
                <h3 class="sub-section-title"><u>Thread Structure (Before Animation):</u></h3>
                <div class="section-content">
                    <img src="./images/user.png" alt="thread structure before animation">
                    <p>
                        <strong>User input thread:</strong>
                        This thread reads user input parameters on terminal including stepper motor angle which is the horizontal position, number of balls to launch, the time between each ball release, and the speed of the DC motors
                    </p>
                    <p>
                        <strong>Stepper motor thread:</strong>
                        This thread waits for semaphore signal from user input thread before executing the rotation. It controls the horizontal position to the desired angle.
                    </p>
                    <p>
                        <strong>Ball release thread:</strong>
                        This thread opens the gate to release one ball then closes it quickly after receiving a semaphore signal from the user input thread.
                    </p>
                    <p>
                        <strong>Ball launcher thread:</strong>
                        This thread spins up the DC motors to launch the ball when it received semaphore signal from the ball release thread.
                    </p>
                    <img src="./images/animation.png" alt="thread structure after animation">
                </div>
                <h3 class="sub-section-title"><u>Motor Control:</u></h3>
                <div class="section-content">
                    <p>
                        <strong>Stepper motor:</strong>
                        We implemented this using step sequencing with appropriate delays between phases. The motor rotates to user input desired angles with calibrated step counts.
                    </p>
                    <p>
                        <strong>Servo motor:</strong>
                        The servo motor is controlled using PWM at 50 Hz (20 ms period) as specified in the SG90 datasheet. We calibrated two positions: release_closed = 180 which is the gate closed position and release_open = 90 which is gate open when release the ball. At first, the servo would immediately open when we start the program. We fixed this by setting the initial duty cycle to angle_to_dc(180) to ensure it starts in a closed position
                    </p>
                    <p>
                        <strong>DC motors:</strong>
                        These motors are controlled through the motor driver using PWM for speed control. We utilized our code from rolling_control.py and run_test.py from lab 3.                    
                    </p>  
                </div>
            </section>
            <section class="project-section" id="testing">
                <h2 class="section-title">Testing</h2>
                <div class="section-content">
                    <p>
                        For the stepper motor, it initially did not rotate properly despite multiple code revisions. After purchasing a multimeter, we determined that the issue was related to the power supply rather than the software. One battery holder had an open connection tab that was not fully closed, and another two-battery holder had broken power terminal wires. After replacing the faulty battery holder, the stepper motor began operating as expected.
                    </p>
                    <p>
                        We also learned two important details about the servo motor. The S51 micro servo (9 g) from Smraza is essentially a rebranded SG90, which allowed us to reference the SG90 datasheet for proper control parameters. In particular, the PWM signal must have a period of exactly 20 ms (50 Hz) to ensure correct servo operation.
                    </p>
                    <p>
                        Initially, the DC motors functioned correctly when tested individually. However, after the full system was assembled, they stopped operating. Because the same motors and control code had worked reliably in Lab 3, we concluded that the issue was unlikely to be software-related. Further investigation suggested that the problem stemmed from wiring and motor driver connections rather than the control logic.
                    </p>
                    <p>
                        During testing, one of the batteries failed and was safely disposed of. We believe this failure was caused by an incorrect power connection, where a wire was connected to an inappropriate voltage range. To improve reliability and safety, we switched to using a regulated power supply to power the DC motors instead of batteries.
                    </p>
                    <p>
                        We also encountered issues with the PiTFT interface. In particular, after running the animation thread, the display would occasionally turn black and fail to update properly. This behavior suggested a threading or display refresh issue, which highlighted the challenges of managing concurrent graphical updates in a multithreaded environment.
                    </p>
                    <img src="./images/circuit.png" alt="testing of motors and threads running">
                </div>
            </section>
            <section class="project-section" id="conclusion">
                <h2 class="section-title">Conclusion</h2>
                <div class="section-content">
                    <p>
                        Overall, our project performed largely as intended and successfully demonstrated the core functionality of an affordable, customizable ping pong ball launcher controlled by a Raspberry Pi 4. During the final demo, the system was able to launch ping pong balls consistently while allowing user control over key parameters such as horizontal rotation, launch timing, and ball feeding. One particularly successful aspect of the demonstration (during testing, it doesn't always release one ball at a time, but often two together) was the feeding mechanism, which reliably released balls one at a time, preventing jamming and ensuring consistent launches.
                    </p>
                    <p>
                        Several aspects of the system worked particularly well. The dual DC motor wheel launcher provided sufficient torque and relatively consistent launch performance. The servo-based feeding mechanism performed reliably during the demo by dropping a single ball per launch cycle, which was a significant improvement over earlier designs. In addition, the use of multithreaded Python code allowed motor control, user input, and display updates to run concurrently without major timing conflicts.
                    </p>
                    <p>
                        However, some parts of the system did not work exactly as expected. Hardware reliability was a recurring challenge, particularly with power distribution and wiring. Issues with battery connections and motor driver wiring caused intermittent motor failures during development, and one battery failed due to an incorrect power connection. These issues required troubleshooting with a multimeter and ultimately led us to switch to a regulated power supply for improved stability. Additionally, while the PiTFT interface functioned, we encountered display and animation issues, including occasional black screens after running animation threads, likely due to threading or display refresh conflicts.
                    </p>
                    <p>
                        The project was fun to design and build.
                    </p>
                    <img src="./images/b.png" alt="side profile of ping pong launcher (shows RPi on back)">
                </div>
            </section>
            <section class="project-section" id="future-work">
                <h2 class="section-title">Future Work</h2>
                <div class="section-content">
                    <p>
                        We hope to add additional controls to the ping pong ball launcher, including rotation about other axes to achieve more degrees of freedom. Specifically, we plan to add a servo motor beneath the two DC motors to control an additional launch angle. We also aim to develop a PiTFT interface that maps a ping pong table onto the display, allowing users to tap a coordinate on the screen and have the launcher send the ball to the corresponding location on the table.
                    </p>
                </div>
            </section>
            <section class="project-section" id="work-distribution">
                <h2 class="section-title">Work Distribution</h2>
                <div class="section-content">
                    <figure>
                        <img src="./images/group.png" alt="group photo of Michelle & Ariel">
                        <figcaption>Michelle Yang (left), Ariel Kang (right)</figcaption>
                    </figure>
                    <p>
                        <strong>Michelle Yang:</strong>
                        Designed most of the software architecture (motor threads, multithreading).
                    </p>
                    <p>
                        <strong>Ariel Kang:</strong>
                        Designed most of the animation (animation thread).
                    </p>
                </div>
            </section>
            <section class="project-section" id="parts-list">
                <h2 class="section-title">Parts List</h2>
                <div class="section-content">
                    <table class="project-table">
                        <thead>
                            <tr>
                                <th>Component</th>
                                <th>Cost</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Raspberry Pi 4 Model B</td>
                                <td>$63.00</td>
                            </tr>
                            <tr>
                                <td>Adafruit Capacitive piTFT</td>
                                <td>$44.95</td>
                            </tr>
                            <tr>
                                <td>Adafruit stepper motor</td>
                                <td>$14.50 each</td>
                            </tr>
                            <tr>
                                <td>180 degree micro servo motor </td>
                                <td>$3.95 each</td>
                            </tr>
                            <tr>
                                <td>Tripod (from HongKong)</td>
                                <td>$10.00</td>
                            </tr>
                            <tr>
                                <td>Breadboard</td>
                                <td>$5.00</td>
                            </tr>
                            <tr>
                                <td>Wires</td>
                                <td>N/A</td>
                            </tr>
                            <tr>
                                <td>Cardboard/toilet paper rolls</td>
                                <td>N/A</td>
                            </tr>
                            <tr>
                                <td>Tapes & hotglue</td>
                                <td>N/A</td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="section-content">
                    <p>
                        <strong>Total:</strong>
                        ~169.9
                    </p>
                </div>
            </section>
            <section class="project-section" id="references">
                <h2 class="section-title">References</h2>
                <div class="section-content">
                    <a class="ref-link" href="http://www.ee.ic.ac.uk/pcheung/teaching/DE1_EE/stores/sg90_datasheet.pdf" target="_blank" rel="noopener noreferrer">SG90 Servo Datasheet</a>
                    <br>
                    <a class="ref-link" href="https://www.omc-stepperonline.com/nema-17-stepper-motor-datasheet" target="_blank" rel="noopener noreferrer">Nema 17 Stepper Motor Datasheet</a>
                    <br>
                    <a class="ref-link" href="http://abyz.co.uk/rpi/pigpio/" target="_blank" rel="noopener noreferrer">Pigpio Library</a>
                </div>
            </section>
        </article>

    </main>
    <footer id="footer">
        <div class="footer-content">
            <p class="copyright">Copyright © Michelle Yang 2025</p>
            <div class="footer-icons">
                <a href="#" class="icon-link" aria-label="LinkedIn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                    </svg>
                </a>
                <a href="#" class="icon-link" aria-label="Email">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="2" y="4" width="20" height="16" rx="2"/>
                        <path d="M22 6l-10 7L2 6"/>
                    </svg>
                </a>
                <a href="#" class="icon-link" aria-label="GitHub">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"/>
                    </svg>
                </a>
            </div>
        </div>
    </footer>
    <script src="./js/script.js"></script>
</body>
</html>